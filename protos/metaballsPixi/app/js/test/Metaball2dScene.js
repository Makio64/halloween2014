var Ball, Metaball2dScene,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Metaball2dScene = (function(_super) {
  __extends(Metaball2dScene, _super);

  function Metaball2dScene() {
    this.onMouseMove = __bind(this.onMouseMove, this);
    var ball, blur, gui, i, metaball, _i;
    Metaball2dScene.__super__.constructor.call(this);
    this.mousePosition = new PIXI.Point();
    this.bg = new PIXI.Graphics();
    this.bg.beginFill(0x111111, 1);
    this.bg.drawRect(0, 0, window.innerWidth, window.innerHeight);
    this.bg.endFill();
    this.addChild(this.bg);
    this.bg = new PIXI.Graphics();
    this.bg.beginFill(0xFF0000, 1);
    this.bg.drawRect(0, 0, 0, 0);
    this.bg.position.x = window.innerWidth;
    this.bg.position.y = window.innerHeight;
    this.bg.endFill();
    this.addChild(this.bg);
    this.balls = [];
    for (i = _i = 0; _i < 200; i = _i += 1) {
      ball = new Ball();
      ball.position.x = window.innerWidth * (Math.random() * 0.8 + 0.1);
      ball.position.y = window.innerHeight * (Math.random() * 0.8 + 0.1);
      this.balls.push(ball);
      this.addChild(ball);
    }
    blur = new PIXI.BlurFilter();
    blur.blurX = blur.blurY = 30;
    gui = new dat.GUI();
    gui.add(blur, 'blurX', 0, 100);
    gui.add(blur, 'blurY', 0, 100);
    metaball = new MetaballFilter();
    gui.add(metaball.uniforms.min, 'value', 0, 1);
    this.filters = [blur, metaball];
    return;
  }

  Metaball2dScene.prototype.transitionIn = function() {
    window.addEventListener('mousemove', this.onMouseMove);
    Metaball2dScene.__super__.transitionIn.call(this);
  };

  Metaball2dScene.prototype.onMouseMove = function(e) {
    this.mousePosition.x = e.x;
    this.mousePosition.y = e.y;
  };

  Metaball2dScene.prototype.update = function() {
    var ball, i, _i, _ref;
    for (i = _i = 1, _ref = this.balls.length; _i < _ref; i = _i += 1) {
      this.balls[i].update();
    }
    ball = this.balls[0];
    ball.position.x = this.mousePosition.x;
    ball.position.y = this.mousePosition.y;
  };

  return Metaball2dScene;

})(Scene);

Ball = (function(_super) {
  __extends(Ball, _super);

  function Ball() {
    Ball.__super__.constructor.call(this);
    this.beginFill(0xFFFFFF, 1);
    this.radius = 40 * Math.random() + 10;
    this.angle = Math.random() * Math.PI * 2;
    this.drawCircle(0, 0, this.radius);
    this.endFill();
    return;
  }

  Ball.prototype.update = function() {
    this.position.x += Math.cos(this.angle);
    this.position.y += Math.sin(this.angle);
    if (this.position.x > window.innerWidth + 100) {
      this.position.x = -90;
    } else if (this.position.x < -100) {
      this.position.x = window.innerWidth + 90;
    }
    if (this.position.y > window.innerHeight + 100) {
      this.position.y = -90;
    } else if (this.position.y < -100) {
      this.position.y = window.innerHeight + 90;
    }
    this.position.y += Math.sin(this.angle) * 2;
  };

  return Ball;

})(PIXI.Graphics);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvTWV0YWJhbGwyZFNjZW5lLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLHFCQUFBO0VBQUE7O2lTQUFBOztBQUFBO0FBRUMsb0NBQUEsQ0FBQTs7QUFBWSxFQUFBLHlCQUFBLEdBQUE7QUFDWCxxREFBQSxDQUFBO0FBQUEsUUFBQSxnQ0FBQTtBQUFBLElBQUEsK0NBQUEsQ0FBQSxDQUFBO0FBQUEsSUFDQSxJQUFDLENBQUEsYUFBRCxHQUFxQixJQUFBLElBQUksQ0FBQyxLQUFMLENBQUEsQ0FEckIsQ0FBQTtBQUFBLElBR0EsSUFBQyxDQUFBLEVBQUQsR0FBVSxJQUFBLElBQUksQ0FBQyxRQUFMLENBQUEsQ0FIVixDQUFBO0FBQUEsSUFJQSxJQUFDLENBQUEsRUFBRSxDQUFDLFNBQUosQ0FBYyxRQUFkLEVBQXVCLENBQXZCLENBSkEsQ0FBQTtBQUFBLElBS0EsSUFBQyxDQUFBLEVBQUUsQ0FBQyxRQUFKLENBQWEsQ0FBYixFQUFlLENBQWYsRUFBaUIsTUFBTSxDQUFDLFVBQXhCLEVBQW1DLE1BQU0sQ0FBQyxXQUExQyxDQUxBLENBQUE7QUFBQSxJQU1BLElBQUMsQ0FBQSxFQUFFLENBQUMsT0FBSixDQUFBLENBTkEsQ0FBQTtBQUFBLElBT0EsSUFBQyxDQUFBLFFBQUQsQ0FBVSxJQUFDLENBQUEsRUFBWCxDQVBBLENBQUE7QUFBQSxJQVNBLElBQUMsQ0FBQSxFQUFELEdBQVUsSUFBQSxJQUFJLENBQUMsUUFBTCxDQUFBLENBVFYsQ0FBQTtBQUFBLElBVUEsSUFBQyxDQUFBLEVBQUUsQ0FBQyxTQUFKLENBQWMsUUFBZCxFQUF1QixDQUF2QixDQVZBLENBQUE7QUFBQSxJQVdBLElBQUMsQ0FBQSxFQUFFLENBQUMsUUFBSixDQUFhLENBQWIsRUFBZSxDQUFmLEVBQWlCLENBQWpCLEVBQW1CLENBQW5CLENBWEEsQ0FBQTtBQUFBLElBWUEsSUFBQyxDQUFBLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBYixHQUFpQixNQUFNLENB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LEdBQWMsQ0FBQSxFQUFkLENBREQ7S0FBQSxNQUVLLElBQUcsSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUFWLEdBQWMsQ0FBQSxHQUFqQjtBQUNKLE1BQUEsSUFBQyxDQUFBLFFBQVEsQ0FBQyxDQUFWLEdBQWMsTUFBTSxDQUFDLFVBQVAsR0FBa0IsRUFBaEMsQ0FESTtLQUxMO0FBT0EsSUFBQSxJQUFHLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixHQUFZLE1BQU0sQ0FBQyxXQUFQLEdBQW1CLEdBQWxDO0FBQ0MsTUFBQSxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYyxDQUFBLEVBQWQsQ0FERDtLQUFBLE1BRUssSUFBRyxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYyxDQUFBLEdBQWpCO0FBQ0osTUFBQSxJQUFDLENBQUEsUUFBUSxDQUFDLENBQVYsR0FBYyxNQUFNLENBQUMsV0FBUCxHQUFtQixFQUFqQyxDQURJO0tBVEw7QUFBQSxJQVlBLElBQUMsQ0FBQSxRQUFRLENBQUMsQ0FBVixJQUFlLElBQUksQ0FBQyxHQUFMLENBQVMsSUFBQyxDQUFBLEtBQVYsQ0FBQSxHQUFpQixDQVpoQyxDQURNO0VBQUEsQ0FYUCxDQUFBOztjQUFBOztHQUZrQixJQUFJLENBQUMsU0ExRHhCLENBQUEiLCJmaWxlIjoidGVzdC9NZXRhYmFsbDJkU2NlbmUuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8iLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBNZXRhYmFsbDJkU2NlbmUgZXh0ZW5kcyBTY2VuZVxuXG5cdGNvbnN0cnVjdG9yOigpLT5cblx0XHRzdXBlcigpXG5cdFx0QG1vdXNlUG9zaXRpb24gPSBuZXcgUElYSS5Qb2ludCgpXG5cblx0XHRAYmcgPSBuZXcgUElYSS5HcmFwaGljcygpXG5cdFx0QGJnLmJlZ2luRmlsbCgweDExMTExMSwxKVxuXHRcdEBiZy5kcmF3UmVjdCgwLDAsd2luZG93LmlubmVyV2lkdGgsd2luZG93LmlubmVySGVpZ2h0KVxuXHRcdEBiZy5lbmRGaWxsKClcblx0XHRAYWRkQ2hpbGQoQGJnKVxuXG5cdFx0QGJnID0gbmV3IFBJWEkuR3JhcGhpY3MoKVxuXHRcdEBiZy5iZWdpbkZpbGwoMHhGRjAwMDAsMSlcblx0XHRAYmcuZHJhd1JlY3QoMCwwLDAsMClcblx0XHRAYmcucG9zaXRpb24ueCA9IHdpbmRvdy5pbm5lcldpZHRoXG5cdFx0QGJnLnBvc2l0aW9uLnkgPSB3aW5kb3cuaW5uZXJIZWlnaHRcblx0XHRAYmcuZW5kRmlsbCgpXG5cdFx0QGFkZENoaWxkKEBiZylcblxuXHRcdEBiYWxscyA9IFtdXG5cdFx0Zm9yIGkgaW4gWzAuLi4yMDBdIGJ5IDFcblx0XHRcdGJhbGwgPSBuZXcgQmFsbCgpXG5cdFx0XHRiYWxsLnBvc2l0aW9uLnggPSB3aW5kb3cuaW5uZXJXaWR0aCooTWF0aC5yYW5kb20oKSowLjgrMC4xKTtcblx0XHRcdGJhbGwucG9zaXRpb24ueSA9IHdpbmRvdy5pbm5lckhlaWdodCooTWF0aC5yYW5kb20oKSowLjgrMC4xKTtcblx0XHRcdEBiYWxscy5wdXNoKGJhbGwpXG5cdFx0XHRAYWRkQ2hpbGQoYmFsbClcblxuXHRcdGJsdXIgPSBuZXcgUElYSS5CbHVyRmlsdGVyKClcblx0XHRibHVyLmJsdXJYID0gYmx1ci5ibHVyWSA9IDMwXG5cdFx0Z3VpID0gbmV3IGRhdC5HVUkoKVxuXHRcdGd1aS5hZGQoYmx1ciwnYmx1clgnLDAsMTAwKVxuXHRcdGd1aS5hZGQoYmx1ciwnYmx1clknLDAsMTAwKVxuXHRcdG1ldGFiYWxsID0gbmV3IE1ldGFiYWxsRmlsdGVyKClcblx0XHRndWkuYWRkKG1ldGFiYWxsLnVuaWZvcm1zLm1pbiwndmFsdWUnLDAsMSlcblxuXHRcdEBmaWx0ZXJzID0gW2JsdXIsIG1ldGFiYWxsXVxuXHRcdHJldHVyblxuXG5cdHRyYW5zaXRpb25JbjooKS0+XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsQG9uTW91c2VNb3ZlKVxuXHRcdHN1cGVyKClcblx0XHRyZXR1cm5cblxuXHRvbk1vdXNlTW92ZTooZSk9PlxuXHRcdEBtb3VzZVBvc2l0aW9uLnggPSBlLnhcblx0XHRAbW91c2VQb3NpdGlvbi55ID0gZS55XG5cdFx0cmV0dXJuXG5cblx0dXBkYXRlOigpLT5cblx0XHRmb3IgaSBpbiBbMS4uLkBiYWxscy5sZW5ndGhdIGJ5IDFcblx0XHRcdEBiYWxsc1tpXS51cGRhdGUoKVxuXHRcdFxuXHRcdGJhbGwgPSBAYmFsbHNbMF1cblx0XHRiYWxsLnBvc2l0aW9uLnggPSBAbW91c2VQb3NpdGlvbi54XG5cdFx0YmFsbC5wb3NpdGlvbi55ID0gQG1vdXNlUG9zaXRpb24ueVxuXHRcdHJldHVyblxuXG5jbGFzcyBCYWxsIGV4dGVuZHMgUElYSS5HcmFwaGljc1xuXG5cdGNvbnN0cnVjdG9yOigpLT5cblxuXHRcdHN1cGVyKClcblx0XHRAYmVnaW5GaWxsKDB4RkZGRkZGLDEpXG5cdFx0QHJhZGl1cyA9IDQwKk1hdGgucmFuZG9tKCkrMTBcblx0XHRAYW5nbGUgPSBNYXRoLnJhbmRvbSgpKk1hdGguUEkqMlxuXHRcdEBkcmF3Q2lyY2xlKDAsMCxAcmFkaXVzKVxuXHRcdEBlbmRGaWxsKClcblx0XHRcblx0XHRyZXR1cm5cblxuXHR1cGRhdGU6KCktPlxuXHRcdEBwb3NpdGlvbi54ICs9IE1hdGguY29zKEBhbmdsZSlcblx0XHRAcG9zaXRpb24ueSArPSBNYXRoLnNpbihAYW5nbGUpXG5cblx0XHRpZihAcG9zaXRpb24ueD53aW5kb3cuaW5uZXJXaWR0aCsxMDApXG5cdFx0XHRAcG9zaXRpb24ueCA9IC05MFxuXHRcdGVsc2UgaWYgQHBvc2l0aW9uLnggPCAtMTAwXG5cdFx0XHRAcG9zaXRpb24ueCA9IHdpbmRvdy5pbm5lcldpZHRoKzkwXG5cdFx0aWYoQHBvc2l0aW9uLnk+d2luZG93LmlubmVySGVpZ2h0KzEwMClcblx0XHRcdEBwb3NpdGlvbi55ID0gLTkwXG5cdFx0ZWxzZSBpZiBAcG9zaXRpb24ueSA8IC0xMDBcblx0XHRcdEBwb3NpdGlvbi55ID0gd2luZG93LmlubmVySGVpZ2h0KzkwXG5cdFx0XG5cdFx0QHBvc2l0aW9uLnkgKz0gTWF0aC5zaW4oQGFuZ2xlKSoyXG5cdFx0cmV0dXJuXG4iXX0=